@model CascadingDropDown.Models.GetCombineData

@{
	ViewData["Title"] = "Cascade";
}

<h1>Cascade</h1>


<h2>
	@ViewBag.DisplayCountry
</h2>
<h2>
	@ViewBag.DisplayState
</h2>

@{
	Html.BeginForm("Details", "Second", FormMethod.Post);


	<div class="container">
		<div class="form-group">


			@Html.DropDownListFor(model => model.CountryId, ViewBag.CountryList as SelectList, "--Select Country--", new { @class="form-control"})

		</div>
		<div class="form-group">

			@Html.DropDownListFor(model => model.StateId,new SelectList(" "), "--Select State--", new { @class = "form-control" })
		</div>

		<input type="submit" value="Save" />



	</div>


	Html.EndForm();

}




	






@*<a href="~/lib/jquery/dist/jquery.min.map">~/lib/jquery/dist/jquery.min.map</a>*@
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/jquery/dist/jquery.js"></script>
<script>
	$(document).ready(function () {
		$("#CountryId").change(function () {
			$.get("/Second/State", { cId: $("#CountryId").val() }, function (data) {
				$("#StateId").empty();
				$.each(data, function (index, row) {
					
					$("#StateId").append('<option value="' + row.stateId + '">' + row.stateName + '</option>');
				});
			});
		})
	});
</script>